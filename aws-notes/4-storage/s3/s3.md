# S3 

## Distributed Object Store
Distributed data store with a large number of machines connected over a network 
Data is managed as objects, hence called object store 

Object store
- unique ID (key)
- metadata describing the content 
    - date of last modification
    - size
    - owner
    - type
    ...
- content itself 


## Use Cases
Basic Use Casess
- Store and deliver static website content 
- Store and deliver user-generated content 
- Store structrued data for analytics, data lake 

Integrate S3 into the application
- Allow a user to upload a profile picture (store in S3 and make it publicly accessible)
- Generate reports and make them accessible to users (if user wants to download, fetch from S3)
- Share data between applications (application A can write an object and application B can download and analyze)

Note S3 is an eventually consistent object store. Consider this if integrating into your applications and processes 


## Bucket
A bucket is a container for objects 

Key are stored in alphabetical order in an index. Key name determines which partition the key is stored in
Using a / in the key acts like creating a folder for your object 


## CLI 
make a bucket with a globally unique name 
$ aws mb s3://abc-bucket

sync a local folder to s3 
$ aws s3 sync /Users/xx/ s3://abc-bucket/backup

download from the s3 to local folder
$ aws s3 cp --recursive s3://aws-bucket/backup /Users/xx/

remove bucket and cleaup 
$ aws rb --force s3://abc-bucket 

Add a hash prefix to each object to increase throughput with S3 


## SDK
SDKs enable the following programmatically 
- List buckets and objects 
- CRUD objects and buckets
- Manage access to objects

A simple node.js application to view image gallery https://github.com/AWSinAction/code2/tree/master/chapter08/gallery


# Glacier 

Archive objects that have been stored on S3 to reduce storage costs 

Management -> Lifecycle -> Add Lifecycle Rule 
- Select transition to Amazon Glacier 
- Days after object creation 

Restore from Glacier to S3 


